<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cocktail info</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .favorite-btn {
            margin-top: -15px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<div class="container my-5 text-center">
    <h1>TELEMEAL</h1>

    <div class="col-first">
        <img th:src="${meal[1]}" class="img-fluid mb-4" style="height: 30vh;">
        <br>

    </div>


    <div class="mt-4" style="text-align: left">
        <h1 th:text="${meal[0]}" class="mb-4"></h1>

        <div th:if="${isFavorite == false}">
            <form id="favForm" action="/addFav" method="post" onsubmit="showModal(event)">
                <input type="hidden" name="favmeal" th:value="${meal[0]}">
                <input type="hidden" name="favmeal" th:value="${meal[1]}">
                <input type="hidden" name="favmeal" th:value="${meal[2]}">
                <input type="hidden" name="favmeal" th:value="${meal[3]}">
                <input type="hidden" name="favmeal" th:value="${meal[4]}">
                <input type="hidden" name="favmeal" th:value="${meal[5]}">
                <input type="hidden" name="favmeal" th:value="${meal[6]}">
                <input type="hidden" name="favmeal" th:value="${meal[7]}">
                <input type="hidden" name="favmeal" th:value="${meal[8]}">
                <input type="hidden" name="favmeal" th:value="${meal[9]}">
                <input type="hidden" name="favmeal" th:value="${meal[10]}">
                <input type="hidden" name="favmeal" th:value="${meal[11]}">
                <input type="hidden" name="favmeal" th:value="${meal[12]}">
                <input type="hidden" name="favmeal" th:value="${meal[13]}">

                <button type="submit" class="btn btn-outline-primary favorite-btn">
                    <i class="fas fa-star"></i> Add to favorites
                </button>
            </form>
        </div>
        <div th:if="${isFavorite == true}">
            <button type="button" class="btn btn-success">
                <i class="fas fa-check"></i> Favorite
            </button>
        </div>

        <p th:if="${meal[2]!= null}"><strong>Category: </strong><span th:text="${meal[2]}"></span></p>
        <p th:if="${meal[3]!= null}"><strong>Area: </strong><span th:text="${meal[3]}"></span></p>
        <p th:if="${meal[4]!= null}"><strong>Tags: </strong><span th:text="${meal[4]}"></span></p>

        <p><strong>Instructions: </strong><span th:text="${meal[5]}"></span></p>


        <h4>Ingredients</h4>
        <table class="table">
            <tbody>
            <tr th:if="${meal[6] != null && meal[7] != null}">
                <td th:text="${meal[7]} + ' ' + ${meal[6]}"></td>
            </tr>
            <tr th:if="${meal[8] != null && meal[9] != null}">
                <td th:text="${meal[9]} + ' ' + ${meal[8]}"></td>
            </tr>
            <tr th:if="${meal[10] != null && meal[11] != null}">
                <td th:text="${meal[11]} + ' ' + ${meal[10]}"></td>
            </tr>
            <tr th:if="${meal[12] != null}">
                <td th:text="${meal[12]}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="favoriteModal" tabindex="-1" aria-labelledby="favoriteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="favoriteModalLabel">Congratulations</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                You added this drink to favorites.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:inline="javascript">
    var showModal = /*[[${showModal}]]*/ false;
    document.addEventListener("DOMContentLoaded", function() {
        // Verifica si el atributo `addedToFavorites` est√° presente y muestra el modal si es true
        if (showModal) {
            var modal = new bootstrap.Modal(document.getElementById('favoriteModal'));
            modal.show();
        }
    });
</script>

</body>
</html>
